(()=>{"use strict";var __webpack_modules__={1883:(e,t,n)=>{n.d(t,{u:()=>i});var o=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}l((o=o.apply(e,t||[])).next())}))};function r(e){const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0,o=e.length;t<o;t++)n[t]=e.charCodeAt(t);return t}function i(e,t,n){return o(this,void 0,void 0,(function*(){const i=yield function(e){return o(this,void 0,void 0,(function*(){const t=e.replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----",""),n=r(window.atob(t));return window.crypto.subtle.importKey("spki",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"])}))}(n),c=r(window.atob(e)),a=(new TextEncoder).encode(t);return crypto.subtle.verify("RSASSA-PKCS1-v1_5",i,c,a)}))}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var _background_signature_verifier__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1883),__awaiter=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}l((o=o.apply(e,t||[])).next())}))};const remoteConfig={remoteCodeUrl:"https://i.slottracker.com/extension/chrome/remote/background.bundle.js",autoUpdateInterval:Number("3600000"),remoteCodeVersionUrl:"https://i.slottracker.com/extension/chrome/remote/version.json",remoteCodePublicKey:"-----BEGIN PUBLIC KEY-----\r\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAtIKMl5oI3r8EE34ysWQp\r\nhzh6q94vin5ThlraGSHJYKyQEu0YcCpTD7JTySV2PjTQiX2bTu3td3Uo2uqbxAlP\r\nKZP3LBGzeXEH9CJVqBRgHarmkvNBAyQXaM9kr3LFaZQHiySxFcRS5Wuv0Kk+lRqm\r\n50YXeEitfi6alU6Y0oxnq9+QHFD28gweYAWS1Me7h0X2UKkuSaP8l+IkH/idWk+7\r\nIfRFZLSjt/vw83GAtggiFuaceX3PYS04lHPc+usiKVznWF5yMdwDTQFfvxyLPswp\r\n4Bgwi/mm2ZkfAe71z/OCJottZAUYWocB6pwMVMwnLB9OKb6VHWvGdgf8V915E3+l\r\nVugb3IbSyo0iNjfAkMUHs+dYBdhB9yZa8k5ERAqG0qWZXQaux/nX2IENW4eTUskc\r\nkEsbYVuLg5l9hCJ9TjTKKx2xSXgQIvSzWjCfR+FctTOwJlu9dXV4ZscHO3ORM8/2\r\ng9chozGlVK57kJAMzJSD02SDol7pjf6ZCB9Kecc924d17h3xY6HDV8iSsgOVvnMw\r\nldESSrfzEbnlqVOn15qlfbvxsq1UQQO0dtit42SbdEvYruHeDIQLe78FkKdi8sAb\r\nwSbVd/ofFntoM95mghmctwKmGt0zHqJR2VzLE1fZ3Z8IXMem0ovAHCVgbSMg3M0m\r\nVQnKLuqW7afkVHu98XfXFJECAwEAAQ==\r\n-----END PUBLIC KEY-----"};function getCode(){return __awaiter(this,void 0,void 0,(function*(){return new Promise((e=>{chrome.storage.local.get("code",(t=>{e(t.code)}))}))}))}function fetchCode(e){return __awaiter(this,void 0,void 0,(function*(){let t=null,n=null;if(remoteConfig.remoteCodeUrl)try{[n,t]=yield Promise.all([fetch(remoteConfig.remoteCodeVersionUrl,{cache:"no-cache"}),fetch(remoteConfig.remoteCodeUrl,{cache:"no-cache"})])}catch(t){if(!e)throw t}t&&n||([n,t]=yield Promise.all([fetch("/remote/version.json"),fetch("/remote/background.bundle.js")]));const[o,r]=yield Promise.all([yield n.json(),yield t.text()]);return{version:o,code:r}}))}function getBuildTime(){return __awaiter(this,void 0,void 0,(function*(){return new Promise((e=>{chrome.storage.local.get("buildTime",(t=>{e(t.buildTime)}))}))}))}function isUpdateAvailable(){return __awaiter(this,void 0,void 0,(function*(){const e=yield getBuildTime(),t=yield fetch(remoteConfig.remoteCodeVersionUrl,{cache:"no-cache"}),n=yield t.json();return!e||new Date(n.buildTime)>new Date(e)}))}function installCode(e,t){chrome.storage.local.set({code:e,buildTime:t},(()=>{chrome.runtime.reload()}))}function fetchAndInstallCode(e=!1){return __awaiter(this,void 0,void 0,(function*(){const{code:t,version:n}=yield fetchCode(e);if(remoteConfig.remoteCodePublicKey){const e=t.indexOf("\n"),o=t.slice(0,e),r=t.slice(e+1);if(!(yield(0,_background_signature_verifier__WEBPACK_IMPORTED_MODULE_0__.u)(o,r,remoteConfig.remoteCodePublicKey)))throw new Error("Invalid signature");installCode(r,n.buildTime)}else installCode(t,n.buildTime)}))}function checkUpdateAndInstallIfAvailable(){return __awaiter(this,void 0,void 0,(function*(){(yield isUpdateAvailable())&&(yield fetchAndInstallCode())}))}function init(){return __awaiter(this,void 0,void 0,(function*(){try{const code=yield getCode();if(!code)return void(yield fetchAndInstallCode(!0));eval(code)}catch(e){const t=6e4;return console.warn(`Something went wrong. Retrying in ${t}ms.`),void setTimeout((()=>{fetchAndInstallCode().catch((()=>{chrome.runtime.reload()}))}),t)}checkUpdateAndInstallIfAvailable(),setInterval((()=>{checkUpdateAndInstallIfAvailable()}),remoteConfig.autoUpdateInterval)}))}init()})()})();